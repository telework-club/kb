---
title: 【实用指南】谈谈我的远程办公基础设施——云
lang: zh-CN
permalink: /experience/2020/cloud-the-infrastructure-of-telework
meta:
  - name: author
    content: 肖振兴
  - name: author-link
    content: 
  - name: source
    content: 盛安德软件
  - name: source-link
    content: https://mp.weixin.qq.com/s/Rz76wUzKCiV9OIJ_Xu_T5A
  - name: type
    content: original
navbar:
sidebar:
prev:
next:
search:
tags:
editLink:
---
# 【实用指南】谈谈我的远程办公基础设施——云

<copyright :meta="$frontmatter.meta" />

![](./tc.01.02.001/1.png)

在远程办公的各种准备当中，基础设施是第一步要做的事情。正如[《当理想走进现实——我终于开始了真正意义上的远程办公》（此处为传送门）](../true-meaning-of-telework)说到的，我在公司架设的私有云为接下来的远程办公奠定了一定的基础。这里对远程办公的一些工具做一个简要的梳理。

但首先要说明我为什么建议使用混合云，而不是共有的开源第三方仓库，主要的原因还是安全，以及维护的便利性。就在我撰写这篇文章的时候，一个大公众号Info Q给出了一条微软封禁github开发者账号的新闻，不得不说这是一个信号。另外就是作为公司的基础设施维护人员，对于网络和数据安全的知识多多少少还是要了解一些的，常见的如注入式攻击，DDOS攻击等等攻击手段和防御方法，还是需要掌握一些的。

## 代码仓库 Gitlab-CE

之前也都是使用Github等公共代码仓库，但是一个重要的问题，就是私有协同仓库需要收费，虽然价格也不是很高，但是如果企业不能够持续维护一些中间件产品，那么就是一笔浪费了。另外就是随着贸易对抗的加剧，其管理体制，我对它的稳定性目前还不能完全信任，但是对于国外客户的代码管理，仍旧是首选产品。

但是在这种情况下，我建议不妨采用gitlab做一个备份产品。Gitlab-CE版本是开源社区提供的免费版本。当然在一些功能上相对于收费版本肯定是有所限制。我喜欢采用gitlab-ce作为内部服务器的代码仓库，用以累积公司业务框架和中间件产品代码。同时利用gitlab天然的镜像仓库，将仓库实时同步到github等私有的仓库(Github允许个人免费使用三个私有仓库，而且其中一个可以支持最多四人协同开发)。做到产品代码管理的万无一失。

## 持续集成 Gitlab Runner

采用gitlab-ce版本作为代码仓库的另一个原因，就是gitlab的CI/CD功能做得非常好，天然的支持K8s进行持续化集成和自动化部署，对其他类似工具也十分友好。而在实现这些功能中，当然是需要Gitlab Runner来支持的。

## 容器 / 私有云 Docker

容器这个话题不必多说，想必这个时代的开发者没有几个是不熟悉容器的，特别是docker容器和K8s工具。另外，只简单说说私有云的问题，想必有些人并不了解。其实OpenStack给出了一个私有云搭建和部署的解决方案，但是我更推崇利用Docker构建私有云方案(搭建过程网上有很多)，主要原因也是方便管理和维护，而且与上述工具同属于一个生态。

另外值得一提的是，为什么要构建私有云，除了上述的生态需要之外，另外一个重要原因就是在FaaS，SaaS和分布式微服务的技术前提下，私有云一定程度上会节省客户的开发成本，因为自己维护的云虽然技术上不如一些大公司的公有云产品，但是开发阶段却是更为节省的方案。当然最终交付产品时，肯定要做迁移，毕竟私有云往往难以承受生产环境的稳定性。

## 镜像仓库

我的另一个推崇就是在Docker容器中部署多个本地镜像仓库，例如Maven，NPM，Docker Hub等等，并不需要对所有框架和所有框架版本进行镜像，而只是对团队内部常用的技术生态进行镜像同步即可。其目的也是为了远程办公的网络问题提供一种保障。这看似是一个弱智的问题，然而有些时候确实很要人命。前一段在老家的家里办公时就遇到了这种情况，运行配置文件同步时，经常卡断，以至于一套框架配置做了两三天，严重影响后续的工作效率。

## API文档工具 Swagger

我主要从事Java开发，经常使用的Web框架就是Spring Boot等等，那么API文档撰写和协同工作也同样是一个重要的问题。早些时候，我并不喜欢Swagger工具，因为Springboot本身就有API文档插件，对代码编辑非常友好。而Swagger对Spring Boot代码侵入性很强，要做好多的注解，而且要对其控制器和安全规则做单独配置。最终部署的时候，你可能还需要花些心思去移除或者屏蔽它。

但是后来再做一个dotnet项目时，忽然发现Swagger也还算好用。所以当团队内部出现这种多语言开发的局面时，Swagger也不失为一种统一的解决方案，毕竟可以降低团队开发人员的学习成本。

## 白板工具 Microsoft Whiteboard

个人尤为喜好使用白板，曾经跟同事说过，会议室小一些，没有桌子，没有椅子都可以容忍，但是没有白板那是万万不行的。事实上很多人也是有同样想法的。因为在需求分析、技术方案和晨会当中，快速地展示，理解和吸收一个人的观点十分重要。而要达成这一效果，个人觉得符号语言和图像语言是最为方便的。因此，白板成了会议的必备工具。

在年后的远程办公中，为了客户沟通和团队会议，我找到了微软的这款产品，即可携同的白板工具，可支持客户端和Web两种形式，非常便捷。

## 在线团队文档协同工具 腾讯文档/Google文档

在线协同工具不必过多介绍，想必很多人都十分熟悉。相比来说，Google文档的功能更为强大，对于文档协议的支持也更为全面，而腾讯文档相比功能上较为逊色。但考虑网络原因，很多情况也就只能选择腾讯文档了。

## 团队会议工具 Teams等

视频会议工具很多，这里不再赘述，感觉微软的产品能够构成一个完整的体系，所以我倾向于微软的产品。

## 团队协作的一站式工具 飞书

值得一提的是，上面的工具都是分开的，使用时比较难受。无意中，我发现了飞书这个产品，它集成了管理、项目管理、功能模块、协作文档、在线会议等多个功能，确实比较好用，号称是字节跳动员工离职最怀念的产品。

## 平板电脑类的书写工具 MyScript Nebo

很多人在这两年选用苹果平板的一个主要原因，我想就是它自带的电容笔配合其自带的智能笔记本功能。确实很好用，深受很多教师，设计和开发者青睐。我的体验也是流畅度和识别能力都非常好，但是我却不太喜欢苹果系统的封闭性。因为可能有一些开发者会跟我一样，喜欢自己做点小工具，然后希望随时放到自己的平板或者手机上。但是对于苹果系统，要做到这点，就显得麻烦了一些。

那么并不是没有这款智能笔记本的替代方案，因为这款智能笔记本背后推动的技术是由MyScript最早提出的。MyScript的产品已经可以适用于Web，Windows S和Android系统，但是都是付费的。不过，总体体验却不完全输于苹果的智能笔记本，这类电子手账主要是记录便捷。我常常用来组织解决方案或者文章纲要，对于数学的符号系统支持得足够好。

## 弹性可伸缩的云数据库

小团队一个很常见的问题就是，经常要求每个开发者在本地Fork并建立数据库，这一点经常造成开发者的困扰，比如当开发者的电脑性能不是足够好时，开发会卡顿；当数据库做一些设置不能完全同步到开发者本地时，就又会造成数据库io错误等等一系列问题；而小团队并没有专门的DBA人员去维护数据库，所以最终让数据库的原子性、冗余问题越来越严重。

我在执行小团队开发时，一般会利用上述的私有云构建统一的数据仓库，大家修改仓库要及时声明，或者将数据库在私有云上进行分布式部署，这样大大减轻开发者对于数据库维护的压力，也同时降低错误率。

那么，私有云上部署数据库，现在也随着数据库的发展而进行，从传统的SQL关系型数据库，到后来的NoSQL数据库，再到现在的NewSQL数据库，从早期的OLTP引擎架构，到后来的OLAP引擎架构，以至于现在的HTAP数据引擎架构，强迫团队使用新技术，就意味着技术团队对技术生态的更新和适应。与此同时，你不需要专门的时间去分享和讲解这些新的技术，因为团队开发者随时可以查看你在如何使用新技术，自然而然他们也会很快地跟上。